# DNS
Some common usage of `nslookup`, `dig`, and `host`. 

## nslookup

### forward lookup with the default DNS server
```
$ nslookup <domain-name>
```

### use a specific DNS server 
```
$ nslookup <domain-name> <dns-server-ip>
```

For example, look up (authoritative) name servers of `google.ca` in `8.8.8.8`: 
```
$ nslookup -type=ns google.ca 8.8.8.8
Server:         8.8.8.8
Address:        8.8.8.8#53

Non-authoritative answer:
google.ca       nameserver = ns4.google.com.
google.ca       nameserver = ns2.google.com.
google.ca       nameserver = ns3.google.com.
google.ca       nameserver = ns1.google.com.
```

look up SOA (start of authority)
```
$ nslookup -type=soa google.ca 8.8.8.8
```

look up mail servers:
```
$ nslookup -type=mx google.ca 8.8.8.8
```

## dig
```
$ dig -version                         
DiG 9.16.11-Debian
```

### zone transfer
```
$ dig @<dns-server-ip> <domain-name> -t AXFR +nocookie
```
* `+nocookie` is needed sometimes because [DNS cookie is enabled by default in BINE 9.11; however, Microsoft DNS Server treates DNS requests with cookie as malformed.](https://datatracker.ietf.org/doc/html/rfc7873)
* [rfc7873: what is DNS cookie](https://datatracker.ietf.org/doc/html/rfc7873)

### name server
```
dig @<dns-server-ip> <domain-name> -t ns +nocookie
```

## host

### zone transfer
```
$ host -t axfr foocampus.com 10.50.96.5
```

### name server 
```
$ host -t ns foocampus.com 10.50.96.5
```
