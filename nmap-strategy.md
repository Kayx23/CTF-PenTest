# nmap scanning strategy

Host discovery only, skip port scan, and output result
```
$ nmap -sn 172.16.37.0/24 -oN discovery.nmap 
```

Trim the output to leave IP only
```
$ cat discovery.nmap | grep "for" | cut -d " " -f 5 > ips.txt 
```

Deep scan the supplied IP
```
$ nmap -sV -n -Pn -p- -T4 -v -A --open -iL ips.txt 
```
* the `--open` here is important... otherwise a 3 min scan turns into 30 mins

### Others

Host discovery with a SYN packet to common ports: 
```
$ nmap -n -sn -PS22,135,443,445 <ip-range>
```
* if not port is specified (i.e. `-PS`) then nmap sends a SYN packet to port 80 by default
* if port 80 is filtered for some reason (e.g. by a firewall), nmap would not detect the host is up. Hence it's a good idea to check a couple common ports
